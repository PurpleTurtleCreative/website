window.Patchstack=window.Patchstack||{},function(a,t,c,e){var p={};e.init=function(){e.cache(),e.bindEvents()},e.cache=function(){p.window=c(a),p.body=c(t.body)},e.bindEvents=function(){if(c("input#patchstack-activate").on("click",function(t){t.preventDefault();var e={action:"patchstack_activate_license",key:c("#patchstack_api_key").val(),PatchstackNonce:PatchstackVars.nonce};if(0==c.trim(e.key).length)return alert("Please enter the API key."),!1;c(".patchstack-resync").hide(),c("#patchstack-activate").hide(),c(".patchstack-loading").show(),c.post(PatchstackVars.ajaxurl,e,function(t){"error"==t.result?(c("#patchstack-activate").show(),c(".patchstack-loading").hide(),t.error_message?alert(t.error_message):alert(PatchstackVars.error_message)):a.location=a.location.href+"&resync=1"})}),c("#patchstack_send_mail_url").on("click",function(a){a.preventDefault();var t={action:"patchstack_send_new_url_email",PatchstackNonce:PatchstackVars.nonce};c.post(PatchstackVars.ajaxurl,t,function(a){"fail"==a?alert(PatchstackVars.error_message):alert("Email Sent!")})}),void 0!==jQuery.fn.dataTable&&-1!==a.location.href.indexOf("patchstack")&&(c(".table-firewall-log").DataTable({processing:!0,serverSide:!0,ajax:{url:PatchstackVars.ajaxurl,type:"POST",data:function(a){a.action="patchstack_firewall_log_table",a.PatchstackNonce=c("meta[name=patchstack_nonce]").attr("value")}},responsive:!0,columns:[{data:"fid"},{data:"referer"},{data:"method"},{data:"ip",render:c.fn.dataTable.render.text()},{data:"log_date"}],order:[[0,"desc"]],searching:!1,ordering:!1,drawCallback:function(a){c(".titletip").tooltip()},columnDefs:[{render:function(a,t,c){return'<span class=" titletip" title="'+(c.description?c.description:"No Explanation")+'">'+(a||"Unknown")+"</span>"},targets:0},{render:function(a,t,c){return decodeURIComponent(a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace("+"," ")},targets:1}]}),c(".table-user-log").DataTable({processing:!0,serverSide:!0,ajax:{url:PatchstackVars.ajaxurl,type:"POST",data:function(a){a.action="patchstack_users_log_table",a.PatchstackNonce=c("meta[name=patchstack_nonce]").attr("value")}},responsive:!0,columns:[{data:"author"},{data:"action",render:c.fn.dataTable.render.text()},{data:"object",render:c.fn.dataTable.render.text()},{data:"object_name",render:c.fn.dataTable.render.text()},{data:"ip",render:c.fn.dataTable.render.text()},{data:"date",render:c.fn.dataTable.render.text()}],order:[[0,"desc"]],searching:!0,ordering:!1})),"v2"==c("#patchstack_captcha_type").val()?(c("#patchstack_captcha_public_key_v3, #patchstack_captcha_private_key_v3, #patchstack_captcha_public_key_v3_new, #patchstack_captcha_private_key_v3_new").hide(),c("#patchstack_captcha_public_key, #patchstack_captcha_private_key").show()):"invisible"==c("#patchstack_captcha_type").val()?(c("#patchstack_captcha_public_key, #patchstack_captcha_private_key, #patchstack_captcha_public_key_v3_new, #patchstack_captcha_private_key_v3_new").hide(),c("#patchstack_captcha_public_key_v3, #patchstack_captcha_private_key_v3").show()):(c("#patchstack_captcha_public_key, #patchstack_captcha_private_key, #patchstack_captcha_public_key_v3, #patchstack_captcha_private_key_v3").hide(),c("#patchstack_captcha_public_key_v3_new, #patchstack_captcha_private_key_v3_new").show()),c("#patchstack_captcha_type").change(function(){"v2"==c("#patchstack_captcha_type").val()?(c("#patchstack_captcha_public_key_v3, #patchstack_captcha_private_key_v3, #patchstack_captcha_public_key_v3_new, #patchstack_captcha_private_key_v3_new").hide(),c("#patchstack_captcha_public_key, #patchstack_captcha_private_key").show()):"invisible"==c("#patchstack_captcha_type").val()?(c("#patchstack_captcha_public_key, #patchstack_captcha_private_key, #patchstack_captcha_public_key_v3_new, #patchstack_captcha_private_key_v3_new").hide(),c("#patchstack_captcha_public_key_v3, #patchstack_captcha_private_key_v3").show()):(c("#patchstack_captcha_public_key, #patchstack_captcha_private_key, #patchstack_captcha_public_key_v3, #patchstack_captcha_private_key_v3").hide(),c("#patchstack_captcha_public_key_v3_new, #patchstack_captcha_private_key_v3_new").show())}),c("#geo-countries").length>0){var t=[];""!=c("#geo-countries").data("selected")&&(t=c("#geo-countries").data("selected").split(",")),c("#geo-countries").selectize({maxItems:null,delimiter:",",plugins:["remove_button"],items:t})}},c(e.init)}(window,document,jQuery,window.Patchstack);