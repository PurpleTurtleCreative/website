(()=>{"use strict";const e=window.wp.hooks,t=window.wp.element,l=(window.wp.apiFetch,window.wp.blockEditor),a=window.wp.components,n=window.wp.i18n,o=e=>{let{attributes:o,setAttributes:c}=e;const{colorScheme:r,content:s,language:i,lineNumbers:u,title:m}=o;(0,t.useEffect)((()=>{!i&&mkaz_code_syntax_default_lang&&c({language:mkaz_code_syntax_default_lang})}),[i]);const g=u?{"line-numbers":"true"}:{},_=(0,l.useBlockProps)({...g});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.InspectorControls,{key:"controls"},(0,t.createElement)(a.PanelBody,{title:(0,n.__)("Settings")},(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.SelectControl,{label:(0,n.__)("Language"),value:i,options:[{label:(0,n.__)("Select code language","code-syntax-block"),value:""}].concat(Object.keys(mkaz_code_syntax_languages).map((e=>({label:mkaz_code_syntax_languages[e],value:e})))),onChange:e=>c({language:e})})),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.ToggleControl,{label:(0,n.__)("Show line numbers"),checked:u,onChange:e=>c({lineNumbers:e})})),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.TextControl,{label:(0,n.__)("Title for Code Block","code-syntax-block"),value:m,onChange:e=>c({title:e}),placeholder:(0,n.__)("Title or File (optional)","code-syntax-block")}))),(0,t.createElement)(a.PanelBody,{title:(0,n.__)("Global Color Scheme","code-syntax-block")},(0,t.createElement)("p",null,"The global color scheme is now set in the Dashboard settings menu."))),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wp-block mkaz-code-syntax-block__labels"},(0,t.createElement)("span",{className:"mkaz-code-syntax-block__label-lang"},"<",mkaz_code_syntax_languages[i],">"),u&&(0,t.createElement)("span",{className:"mkaz-code-syntax-block__label-line-num"},"#")),(0,t.createElement)("pre",_,(0,t.createElement)(l.RichText,{value:s||"",onChange:e=>c({content:e}),placeholder:(0,n.__)("Write codeâ€¦"),"aria-label":(0,n.__)("Code"),preserveWhiteSpace:!0,allowedFormats:[],withoutInteractiveFormatting:!0,__unstablePastePlainText:!0}))))},c=e=>{let{attributes:a}=e,n="";n=a.language?"language-"+a.language:"",n=a.lineNumbers?n+" line-numbers":n;const o=l.useBlockProps.save({title:a.title});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("pre",o,(0,t.createElement)(l.RichText.Content,{tagName:"code",value:a.content,lang:a.language,className:n})))};(0,e.addFilter)("blocks.registerBlockType","mkaz/code-syntax-block",(e=>"core/code"!==e.name?e:{...e,attributes:{...e.attributes,language:{type:"string",selector:"code",source:"attribute",attribute:"lang"},lineNumbers:{type:"boolean"},title:{type:"string",source:"attribute",selector:"pre",attribute:"title"}},edit:o,save:c}))})();