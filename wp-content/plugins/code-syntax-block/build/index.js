!function(){"use strict";var e={n:function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,{a:l}),l},d:function(t,l){for(var a in l)e.o(l,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:l[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.hooks,l=window.wp.element,a=window.wp.apiFetch,n=e.n(a),o=window.wp.blockEditor,c=window.wp.components,r=window.wp.i18n,s=e=>{let{attributes:t,setAttributes:a}=e;const{colorScheme:s,content:u,language:i,lineNumbers:m,title:g}=t;(0,l.useEffect)((()=>{!i&&mkaz_code_syntax_default_lang&&a({language:mkaz_code_syntax_default_lang})}),[i]),(0,l.useEffect)((()=>{n()({path:"/mkaz/code-syntax/v1/get/color-scheme/"}).then((e=>{a({colorScheme:e})})).catch((e=>{console.log("Error fetching color scheme option: ",e)}))}),[s]);const b=m?{"line-numbers":"true"}:{},d=(0,o.useBlockProps)({...b});return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(o.InspectorControls,{key:"controls"},(0,l.createElement)(c.PanelBody,{title:(0,r.__)("Settings")},(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.SelectControl,{label:(0,r.__)("Language"),value:i,options:[{label:(0,r.__)("Select code language","code-syntax-block"),value:""}].concat(Object.keys(mkaz_code_syntax_languages).map((e=>({label:mkaz_code_syntax_languages[e],value:e})))),onChange:e=>a({language:e})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.ToggleControl,{label:(0,r.__)("Show line numbers"),checked:m,onChange:e=>a({lineNumbers:e})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.TextControl,{label:(0,r.__)("Title for Code Block","code-syntax-block"),value:g,onChange:e=>a({title:e}),placeholder:(0,r.__)("Title or File (optional)","code-syntax-block")}))),(0,l.createElement)(c.PanelBody,{title:(0,r.__)("Global Color Scheme","code-syntax-block")},(0,l.createElement)("p",null,"Color scheme applies to all code blocks across the site."),(0,l.createElement)(c.SelectControl,{label:(0,r.__)("Schemes"),value:s,options:[{label:(0,r.__)("Pick color scheme","code-syntax-block"),value:""}].concat([{label:"A11y Dark",value:"prism-a11y-dark"},{label:"One Dark",value:"prism-onedark"},{label:"GH Colors (Light)",value:"prism-ghcolors"},{label:"Nord",value:"prism-nord"}].map((e=>({label:e.label,value:e.value})))),onChange:e=>{let t="/mkaz/code-syntax/v1/set/color-scheme/"+e;n()({path:t}).then((()=>{a({colorScheme:e})})).catch((e=>{console.log("Error updating color scheme option: ",e)}))}}))),(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"wp-block mkaz-code-syntax-block__labels"},(0,l.createElement)("span",{className:"mkaz-code-syntax-block__label-lang"},"<",mkaz_code_syntax_languages[i],">"),m&&(0,l.createElement)("span",{className:"mkaz-code-syntax-block__label-line-num"},"#")),(0,l.createElement)("pre",d,(0,l.createElement)(o.RichText,{value:u||"",onChange:e=>a({content:e}),placeholder:(0,r.__)("Write codeâ€¦"),"aria-label":(0,r.__)("Code"),preserveWhiteSpace:!0,allowedFormats:[],withoutInteractiveFormatting:!0,__unstablePastePlainText:!0}))))},u=e=>{let{attributes:t}=e,a="";a=t.language?"language-"+t.language:"",a=t.lineNumbers?a+" line-numbers":a;const n=o.useBlockProps.save({title:t.title});return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("pre",n,(0,l.createElement)(o.RichText.Content,{tagName:"code",value:t.content,lang:t.language,className:a})))};(0,t.addFilter)("blocks.registerBlockType","mkaz/code-syntax-block",(e=>"core/code"!==e.name?e:{...e,attributes:{...e.attributes,language:{type:"string",selector:"code",source:"attribute",attribute:"lang"},lineNumbers:{type:"boolean"},title:{type:"string",source:"attribute",selector:"pre",attribute:"title"}},edit:s,save:u}))}();